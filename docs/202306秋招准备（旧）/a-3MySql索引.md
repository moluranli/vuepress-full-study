# MySQL索引

视频学习地址:[编程不良人MySQL](https://www.bilibili.com/video/BV19y4y127h4?p=1&vd_source=737bc72ddc8b0e9190302e61a877a9d8)

## MySQL索引介绍

- mysql索引是一种帮助mysql**提高查询效率**的**数据结构**
- mysql数据库有两种搜索引擎
  - **InnoDB**
  - **MySIAM**



## MySQL的优点和缺点

### 1. 优点

1. **MySQL索引**可以提高数据库的**查询效率**

### 2. 缺点

1. MySQL索引占用**磁盘空间**
2. 修改,删除数据的同时要**维护索引**,**速度会下降**
3. 维护索引需要**消耗数据库资源**



## 索引的几种分类

### 1. 主键索引

数据库**默认**创建的就是主键索引,在数据库没有指定索引的时候数据库就会自动的创建索引,使用索引的ID来存储,如果没有指定索引,那么就使用数据库自动生成的索引,表中只能有**一个主键索引**,主键索引是**特殊**的**唯一索引**,主键索引存储的值**不能为空**

### 2. 单值索引

单值索引也叫作**普通索引**或者是**单列索引**,就是指以某一列来作为索引进行存储,**一个表可以包含多个普通索引**

### 3. 唯一索引

唯一索引和主键索引类似,都是**列必须唯一**,只是唯一索引的值**可以为空值**

### 4. 复合索引

复合索引就是**一个索引中包含了多个列**,使用复合索引的时候遵循**最左前缀原则**

![image-20220712101058304](https://s2.loli.net/2022/07/12/85rZsNaWFfGXDPc.png)

**参考博客:**[索引最左前缀匹配原则](https://blog.csdn.net/yuanchangliang/article/details/107798724)

### 5. 全文索引(只有在MySIAM中)

相当于es服务器,对索引进行**分词**



## 索引底层B+Tree

### B-Tree

B-Tree是**每一个节点都存储数据**,但是每一页是16KB,所以就使得**每一页存储的数据的数量**

### B+Tree

![image-20220712101558688](https://s2.loli.net/2022/07/12/FTbAJj4D8keCwUc.png)

- 一个**分页**的大小为**16KB**
- 只有**叶子节点存储行数据**
- B+Tree**最多3-4层**就可以存储**大约10亿条数据**



## 聚簇索引和非聚簇索引

### 1. 聚簇索引

**聚簇索引**就是把索引和数据**放在一起**,同时**叶子结点存放数据**

**主键索引就是聚簇索引**,其他的都是非聚簇索引,

### 2. 非聚簇索引

**非聚簇索引**就是将数据和叶子节点**分开存储**,**叶子节点记录数据的地址**,**非聚簇索引都是辅助索引**,辅助索引以某一列创建起来的,同时**叶子节点是对应的主键信息**,辅助索引总是需要**二次查找**,

- 通过单列找到主键
- 通过主键在聚簇索引上找

### InnoDB的聚簇索引和非聚簇索引

![image-20220712104011308](https://s2.loli.net/2022/07/12/IqUjhMd2QbRAtuW.png)



### MYSIAM的非聚簇索引

![image-20220712104201029](https://s2.loli.net/2022/07/12/8O764M5GqkxELT9.png)



